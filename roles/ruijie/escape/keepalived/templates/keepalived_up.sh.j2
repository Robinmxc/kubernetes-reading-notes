#!/bin/bash
set -x
conf_path="/etc/keepalived/conf"

# 检测配置文件是否存在
if [ -d "$conf_path" ]; then
    if [ "`ls -A $conf_path | grep .conf`" != "" ]; then
        status=`systemctl is-active keepalived`
        if [ "$status" == "inactive"  ]; then
            echo `date`+ " keepalived is not start , start keepalived" >> /var/log/keepalived_up.log
            systemctl start keepalived
    else
        echo `date`+ " no config file" >> /var/log/keepalived_up.log
    fi
else
    echo `date`+ " no config dir" >> /var/log/keepalived_up.log
fi