
- name: 获取操作系统版本
  shell: "uname -r"
  register: uname   
- name: 检查操作系统版本
  vars:
    os_ver: ' {{ "el7" in uname.stdout or "oe2203" in uname.stdout or   "uelc20" in uname.stdout or   "an8" in uname.stdout or   "ky10" in uname.stdout}}'
  fail: msg="操作系统不属于支持的版本{{os_required}}"
  when: 'os_ver == False'

- name: 检查rpm环境安装
  shell: "rpm -qa"
  no_log: false
  ignore_errors: false