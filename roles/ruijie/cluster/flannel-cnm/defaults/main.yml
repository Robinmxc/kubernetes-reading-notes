# 部分flannel配置，详见roles/flannel/templates/kube-flannel.yaml.j2

# 如果 node 节点有多块网卡，请设置 true
# 另外发现设置为 true 时能够解决v1.10使用ipvs偶尔出现pod内‘dial tcp 10.68.0.1:443: i/o timeout’的 bug
NODE_WITH_MULTIPLE_NETWORKS: "true"
 
# etcd 客户端通信的IP和端口, 根据etcd组成员自动生成
TMP_NODES: "{% for h in groups['etcd'] %}https://{{ h }}:2379,{% endfor %}"
ETCD_ENDPOINTS: "{{ TMP_NODES.rstrip(',') }}"

ETCDCTL_OPTIONS: "--endpoints={{ ETCD_ENDPOINTS }} --ca-file={{ ca_dir }}/ca.pem --cert-file=/etc/flannel/ssl/flannel.pem --key-file=/etc/flannel/ssl/flannel-key.pem"

FLANNEL_ETCD_PREFIX: "/kube-centos/network"

FLANNEL_CONFIG_KEY: "{{ FLANNEL_ETCD_PREFIX }}/config"

FLANNEL_NETWORK_IP: "{{ CLUSTER_CIDR }}"
