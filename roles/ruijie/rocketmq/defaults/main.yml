rocketmq_public: "no"
rocketmq_version: "4.3.0"
rocketmq_offline: "rocketmq-4.3.0.tar"

rocketmq_check_data_dir: "no"

rocket_cluster_mode: "no"
mq_broker_java_opt: "{%- if CLUSTER_SCALE == 'normal' -%}-Xms4096m -Xmx4096m -Xmn2g -XX:MaxDirectMemorySize=4096m{% elif CLUSTER_SCALE == 'single' %}-Xms512m -Xmx1024m -Xmn256m -XX:MaxDirectMemorySize=512m{%- elif CLUSTER_SCALE == 'small' -%}-Xms512m -Xmx512m -Xmn256m -XX:MaxDirectMemorySize=256m{%- else -%}-Xms800m -Xmx1600m -Xmn800m -XX:MaxDirectMemorySize=800m{%- endif -%}"

mq_server_java_opt: "{%- if CLUSTER_SCALE == 'normal' -%}-Xms512m -Xmx512m -Xmn256m{% elif CLUSTER_SCALE == 'single' %}-Xms256m -Xmx512m -Xmn256m{%- elif CLUSTER_SCALE == 'single' -%}-Xms256m -Xmx256m -Xmn128m{%- else -%}-Xms800m -Xmx800m -Xmn128m{%- endif -%}"

deploy_conf_defaults:
  small:
    resources:
      limits:
        cpu: 1
        memory: 1Gi
      requests:
        cpu: 500m
        memory: 1Gi
  normal:
    resources:
      limits:
        cpu: 6
        memory: 8Gi
      requests:
        cpu: 4
        memory: 4Gi
  single:
    resources:
      limits:
        cpu: 2
        memory: 2560Mi
      requests:
        cpu: 500m
        memory: 1Gi
  basic:
    resources:
      limits:
        cpu: 1
        memory: 2Gi
      requests:
        cpu: 500m
        memory: 1Gi
  single-basic:
    resources:
      limits:
        cpu: 1
        memory: 2Gi
      requests:
        cpu: 500m
        memory: 1Gi
#mq_deploy_conf: '{{ deploy_conf_defaults[CLUSTER_SCALE] }}'
mq_deploy_conf: "{%- if KAD_APP_NAME == 'smpplus' -%} \
                {{ smpplus_deploy_conf_defaults[CLUSTER_SCALE] }} \
              {%- else -%} \
                {{ deploy_conf_defaults[CLUSTER_SCALE] }} \
              {%- endif -%}"


#smpplus定制资源配置，rocketmq_public参数在smpplus的all.yml中有定义为yes，sid默认为no
smpplus_mq_broker_java_opt: "{%- if CLUSTER_SCALE == 'normal' -%}-Xms4096m -Xmx4096m -Xmn2g -XX:MaxDirectMemorySize=4096m{% elif CLUSTER_SCALE == 'single' %}-Xms1024m -Xmx4096m -Xmn1024m -XX:MaxDirectMemorySize=4096m{%- else -%}-Xms512m -Xmx512m -Xmn256m -XX:MaxDirectMemorySize=256m{%- endif -%}"

smpplus_mq_server_java_opt: "{%- if CLUSTER_SCALE == 'normal' -%}-Xms512m -Xmx512m -Xmn256m{% elif CLUSTER_SCALE == 'single' %}-Xms256m -Xmx512m -Xmn256m{%- else -%}-Xms256m -Xmx256m -Xmn128m{%- endif -%}"

smpplus_deploy_conf_defaults:
  small:
    resources:
      limits:
        cpu: 1
        memory: 1Gi
      requests:
        cpu: 500m
        memory: 1Gi
  normal:
    resources:
      limits:
        cpu: 6
        memory: 8Gi
      requests:
        cpu: 4
        memory: 4Gi
  single:
    resources:
      limits:
        cpu: 4
        memory: 8Gi
      requests:
        cpu: 500m
        memory: 1Gi
