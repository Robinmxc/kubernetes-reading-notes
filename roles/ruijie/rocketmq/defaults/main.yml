rocketmq_public: "no"
rocketmq_version: "4.3.0"
rocketmq_offline: "rocketmq-4.3.0.tar"

rocketmq_check_data_dir: "no"

mq_broker_java_opt: "{%- if CLUSTER_SCALE == 'normal' -%}-Xms4096m -Xmx4096m -Xmn2g -XX:MaxDirectMemorySize=4096m{%- else -%}-Xms{{ (ansible_memtotal_mb/32/2)|int }}m -Xmx{{ (ansible_memtotal_mb/32/2)|int }}m -Xmn{{ (ansible_memtotal_mb/32/2/2)|int }}m -XX:MaxDirectMemorySize={{ (ansible_memtotal_mb/32/2/2)|int }}m{%- endif -%}"

mq_server_java_opt: "{%- if CLUSTER_SCALE == 'normal' -%}-Xms512m -Xmx512m -Xmn256m{% elif CLUSTER_SCALE == 'single' %}-Xms{{ (ansible_memtotal_mb/32/2/2)|int }}m -Xmx{{ (ansible_memtotal_mb/32/2)|int }}m -Xmn{{ (ansible_memtotal_mb/32/2/2)|int }}m{%- else -%}-Xms256m -Xmx256m -Xmn128m{%- endif -%}"

deploy_conf_defaults:
  small:
    resources:
      limits:
        cpu: 1
        memory: 1Gi
      requests:
        cpu: 500m
        memory: 1Gi
  normal:
    resources:
      limits:
        cpu: 8
        memory: 8Gi
      requests:
        cpu: 4
        memory: 8Gi
  single:
    resources:
      limits:
        cpu: "{{ (ansible_processor_vcpus/16*1000)|int }}m"
        memory: "{{ (ansible_memtotal_mb/32)|int }}Mi"
      requests:
        cpu: "{{ (ansible_processor_vcpus/16/2*1000)|int }}m"
        memory: "{{ (ansible_memtotal_mb/32)|int }}Mi"

mq_deploy_conf: '{{ deploy_conf_defaults[CLUSTER_SCALE] }}'
