mongodb_version: "4.0.24"
mongodb_offline: "mongo-4.0.24.tar"
mongodb_port: 27017
mongodb_deploy_mode: "{{ groups['mongodb'] | length }}"
mongodb_auth_mode: "no"
mongodb_tool: "mongodb-org-tools-4.0.13-1.el7.x86_64.rpm"

mongodb_check_data_dir: "no"

wiredTigerCacheSizeGB: "{%- if CLUSTER_SCALE == 'normal' -%}4{%- elif CLUSTER_SCALE == 'single' -%}4{%- else -%}0.5{%- endif -%}"

mongodb_liveness_probe: "no"

deploy_conf_defaults:
  small:
    resources:
      limits:
        cpu: 4
        memory: 8Gi
      requests:
        cpu: 1
        memory: 4Gi
  normal:
    resources:
      limits:
        cpu: "{%- if KAD_APP_NAME == 'smpplus' -%}8{%- else -%}16{%- endif -%}"
        memory: "{%- if KAD_APP_NAME == 'smpplus' -%}8Gi{%- else -%}24Gi{%- endif -%}"
      requests:
        cpu: "{%- if KAD_APP_NAME == 'smpplus' -%}{%- else -%}8{%- endif -%}"
        memory: "{%- if KAD_APP_NAME == 'smpplus' -%}4Gi{%- else -%}16Gi{%- endif -%}"
  single:
    resources:
      limits:
        cpu: "{%- if KAD_APP_NAME == 'smpplus' -%}8{%- else -%}4{%- endif -%}"
        memory: 8Gi
      requests:
        cpu: 1
        memory: 4Gi

mongodb_deploy_conf: '{{ deploy_conf_defaults[CLUSTER_SCALE] }}'

mongodb_3_deploy_conf: 
  resources:
    limits:
      cpu: "{%- if KAD_APP_NAME == 'smpplus' -%}4{%- else -%}1{%- endif -%}"
      memory: "{%- if KAD_APP_NAME == 'smpplus' -%}8Gi{%- else -%}1Gi{%- endif -%}"
    requests:
      cpu: 1
      memory: "{%- if KAD_APP_NAME == 'smpplus' -%}4Gi{%- else -%}1Gi{%- endif -%}"
