mongodb_version: "4.0.6"
mongodb_offline: "mongo-4.0.6.tar"
mongodb_port: 27017
mongodb_deploy_mode: "{{ groups['mongodb'] | length }}"
mongodb_auth_mode: "no"

mongodb_check_data_dir: "no"

wiredTigerCacheSizeGB: "{%- if CLUSTER_SCALE == 'normal' -%}8{%- elif CLUSTER_SCALE == 'single' -%}4{%- else -%}0.5{%- endif -%}"

mongodb_liveness_probe: "no"

deploy_conf_defaults:
  small:
    resources:
      limits:
        cpu: 1
        memory: 1Gi
      requests:
        cpu: 1
        memory: 1Gi
  normal:
    resources:
      limits:
        cpu: 16
        memory: 24Gi
      requests:
        cpu: 8
        memory: 16Gi
  single:
    resources:
      limits:
        cpu: "{{ (ansible_processor_vcpus/16*1000)|int }}m"
        memory: "{{ (ansible_memtotal_mb/32*8)|int }}Mi"
      requests:
        cpu: "{{ (ansible_processor_vcpus/16*1000)|int }}m"
        memory: "{{ (ansible_memtotal_mb/32*4)|int }}Mi"

mongodb_deploy_conf: '{{ deploy_conf_defaults[CLUSTER_SCALE] }}'


