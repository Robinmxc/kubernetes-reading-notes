# ---------基础参数--------------------

max_space_dir: "{{
    hostvars[groups['sourcedata'][0]].ansible_mounts
    | selectattr('mount', 'match', '^(?!/var/lib/).*')
    | sort(attribute='size_available')
    | map(attribute='mount')
    | list
    | last }}"

DATA_DIR: "{% if '/' == max_space_dir %}{% else %}{{ max_space_dir }}{% endif %}"

MYSQL_PWD: "{% if '' == SOURCEDATA_MYSQL_PWD %}{{SOURCEDATA_MYSQL_PWD}}{% else %}{% endif %}"

MYSQL_MODE: "{% if ansible_memtotal_mb > 62000 %}24g{% elif ansible_memtotal_mb > 30000 %}12g{% elif ansible_memtotal_mb > 12000 %}6g{% else %}small{% endif %}"

SOURCEDATA_USER_SYNC_TABLE_NAME: "sid_user_info"
